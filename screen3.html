<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Screen 3 - Mở quà</title>
<style>
    body {
        margin: 0;
        padding: 0;
        background: black;
        overflow: hidden;
        text-align: center;
        color: white;
        font-family: Arial, sans-serif;
    }

    #gift-container {
        position: relative;
        width: 350px;
        height: 350px;
        margin: 100px auto 0 auto;
    }

    #than-hop {
        width: 100%;
        position: relative;
        top: 10px; /* thân hộp thấp hơn */
        z-index: 1;
    }

    #nap-hop {
        width: 100%;
        position: absolute;
        top: -90px;
        left: 0;
        transform-origin: center bottom;
        z-index: 2;
        transition: transform 1s ease;
    }

    #anh-qua {
        position: absolute;
        top: 50%;
        left: 50%;
        width: 0;
        height: auto;
        transform: translate(-50%, -50%);
        transition: width 2s ease;
        z-index: 3;
    }

    #loi-chuc {
        display: none;
        margin-top: 20px;
        font-size: 32px;
        padding: 12px 24px;
        border: 4px solid gold;
        color: red;
        font-weight: bold;
        background-color: #fff5e1;
        display: inline-block;
    }

    #tac-gia {
        position: fixed;
        bottom: 10px;
        right: 10px;
        font-size: 14px;
        color: #ccc;
    }

    #open-btn {
        margin-top: 20px;
        padding: 10px 20px;
        font-size: 20px;
        background: gold;
        color: black;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }

    canvas {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        z-index: 0;
        pointer-events: none;
    }
</style>
</head>
<body>

<canvas id="fireworks"></canvas>

<div id="gift-container">
    <img id="nap-hop" src="assets/naphop.png" alt="Nắp hộp">
    <img id="than-hop" src="assets/thanhop.jpg" alt="Thân hộp">
    <img id="anh-qua" src="assets/anhqua.jpg" alt="Ảnh quà">
</div>

<div id="loi-chuc">🎉 Chúc mừng sinh nhật 🎉</div>

<button id="open-btn">Mở quà</button>

<div id="tac-gia">Tác giả: Lộc Thành | 0123456789</div>

<audio id="bg-music" src="assets/music.mp3" autoplay loop></audio>

<script src="assets/firework.js"></script>
<script>
    const napHop = document.getElementById("nap-hop");
    const anhQua = document.getElementById("anh-qua");
    const loiChuc = document.getElementById("loi-chuc");
    const bgMusic = document.getElementById("bg-music");
    const openBtn = document.getElementById("open-btn");

    // Khi trang load => tự phát nhạc & pháo hoa
    window.onload = () => {
        bgMusic.play().catch(() => console.log("Trình duyệt chặn autoplay"));
        startFireworks(5000);
    };

    // Nút mở quà
    openBtn.addEventListener("click", () => {
        // Nắp hộp bật lên
        napHop.style.transform = "rotate(-45deg) translateY(-120px)";

        // Sau 1.2s rơi xuống
        setTimeout(() => {
            napHop.style.transform = "rotate(0deg) translateY(0)";
        }, 1200);

        // Sau khi nắp bật lên, ảnh quà hiện
        setTimeout(() => {
            anhQua.style.width = "350px";
        }, 1500);

        // Lời chúc xuất hiện
        setTimeout(() => {
            loiChuc.style.display = "inline-block";
        }, 3500);

        // Pháo hoa thêm lần nữa
        startFireworks(5000);

        // Ẩn nút mở
        openBtn.style.display = "none";
    });

    // ==== Hàm pháo hoa (lấy từ assets/firework.js) ====
    function startFireworks(duration = 4000) {
        if (typeof Fireworks === "function") {
            new Fireworks({
                target: document.getElementById("fireworks"),
                duration: duration
            });
        }
    }
</script>

</body>
</html>
