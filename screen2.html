<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>M√†n h√¨nh 2</title>
<style>
    body {
        margin: 0;
        background: black;
        overflow: hidden;
        height: 100vh;
        font-family: Arial, sans-serif;
        color: white;
        text-align: center;
    }
    /* Canvas ph√°o hoa */
    canvas {
        position: absolute;
        top: 0;
        left: 0;
        z-index: 1;
    }
    /* C·ª•m b√≥ng bay + b√°nh */
    #balloonCake {
        position: absolute;
        bottom: -800px;
        left: 50%;
        transform: translateX(-50%);
        transition: bottom 4s ease-out;
        z-index: 3;
    }
    /* B√≥ng bay */
    #balloons {
        width: 800px;
        display: block;
        margin: 0 auto;
        transition: opacity 1s ease;
    }
    /* B√°nh sinh nh·∫≠t container */
    #cakeWrapper {
        position: relative;
        width: 800px;
        height: auto;
        margin: -70px auto 0 auto; /* d√≠nh s√°t d√¢y b√≥ng bay */
    }
    /* Hai tr·∫°ng th√°i b√°nh */
    .cakeImg {
        width: 800px; /* C·ªë ƒë·ªãnh k√≠ch th∆∞·ªõc gi·ªëng nhau */
        height: auto;
        position: absolute;
        top: 0;
        left: 0;
        transition: opacity 0.3s ease; /* chuy·ªÉn m∆∞·ª£t h∆°n */
    }
    #cake_on {
        opacity: 1;
        z-index: 2;
    }
    #cake_off {
        opacity: 0;
        z-index: 1;
    }
    /* Ch·ªØ h∆∞·ªõng d·∫´n */
    #hint {
        display: none; /* M·∫∑c ƒë·ªãnh ·∫©n */
        margin-top: 280px;
        font-size: 28px;
        animation: blink 1.2s infinite;
        cursor: pointer;
    }
    @keyframes blink {
        50% { opacity: 0.4; }
    }
    /* N√∫t nh·∫≠n qu√† */
    #giftBtn {
        display: none;
        margin-top: 20px;
        padding: 12px 25px;
        font-size: 20px;
        background: gold;
        border: none;
        border-radius: 10px;
        cursor: pointer;
    }
</style>
</head>
<body>

<!-- Canvas ph√°o hoa -->
<canvas id="fireworks"></canvas>

<!-- C·ª•m b√≥ng bay + b√°nh -->
<div id="balloonCake">
    <img id="balloons" src="assets/balloon.png" alt="Balloons">
    <div id="cakeWrapper">
        <img id="cake_on" class="cakeImg" src="assets/cake_on1.gif" alt="Cake On">
        <img id="cake_off" class="cakeImg" src="assets/cake_off.png" alt="Cake Off">
    </div>
</div>

<!-- Ch·ªØ h∆∞·ªõng d·∫´n -->
<div id="hint">üéÇ ·∫§n v√†o b√°nh ƒë·ªÉ th·ªïi n·∫øn üéÇ</div>

<!-- N√∫t nh·∫≠n qu√† -->
<button id="giftBtn" onclick="goToScreen3()">üéÅ ƒêi nh·∫≠n qu√†</button>

<!-- Nh·∫°c -->
<audio id="music" src="assets/music.mp3"></audio>

<!-- Script ph√°o hoa -->
<script src="assets/fireworks.js"></script>
<script>
window.onload = () => {
    const balloonCake = document.getElementById("balloonCake");
    const balloons = document.getElementById("balloons");
    const music = document.getElementById("music");
    const hint = document.getElementById("hint");

    // Load s·∫µn ·∫£nh ƒë·ªÉ tr√°nh gi·∫≠t
    ["assets/cake_on1.gif", "assets/cake_off.png"].forEach(src => {
        const img = new Image();
        img.src = src;
    });

    // K√©o c·ª•m b√≥ng bay + b√°nh l√™n gi·ªØa
    setTimeout(() => {
        balloonCake.style.bottom = "50%";
    }, 500);

    // Khi t·ªõi gi·ªØa ‚Üí b√≥ng bay bi·∫øn m·∫•t + ph√°t nh·∫°c + b·∫Øn ph√°o hoa + hi·ªán ch·ªØ hint
    setTimeout(() => {
        balloons.style.opacity = 0; // b√≥ng bay m·ªù d·∫ßn
        music.play();
        startFireworks();
        setTimeout(() => {
            balloons.style.display = "none";
            hint.style.display = "block"; // ch·ªâ xu·∫•t hi·ªán sau khi b√≥ng bay bi·∫øn m·∫•t
        }, 1000);
    }, 4500);

    // S·ª± ki·ªán click b√°nh ƒë·ªÉ ƒë·ªïi tr·∫°ng th√°i
    document.getElementById("cakeWrapper").addEventListener("click", () => {
        document.getElementById("cake_on").style.opacity = 0;
        document.getElementById("cake_off").style.opacity = 1;
        hint.style.display = "none";
        document.getElementById("giftBtn").style.display = "inline-block";
    });
};

// H√†m g·ªçi ph√°o hoa
function startFireworks() {
    if (typeof initFireworks === "function") {
        initFireworks();
    }
}

// Chuy·ªÉn sang m√†n h√¨nh 3
function goToScreen3() {
    window.location.href = "screen3.html";
}
</script>
</body>
</html>
